# è½¯ä»¶åŒ…ç®¡ç†

## ç›®å½•

-   [RPM](#RPM)
    -   [åŒ…åç»„æˆéƒ¨åˆ†](#åŒ…åç»„æˆéƒ¨åˆ†)
    -   [å…¶ä»–ç±»å‹çš„å®‰è£…åŒ…](#å…¶ä»–ç±»å‹çš„å®‰è£…åŒ…)
    -   [åŒ…ç®¡ç†å‘½ä»¤](#åŒ…ç®¡ç†å‘½ä»¤)
        -   [å®‰è£…å‘½ä»¤](#å®‰è£…å‘½ä»¤)
        -   [ä¾èµ–åŒ…å®‰è£…](#ä¾èµ–åŒ…å®‰è£…)
        -   [å‡çº§è½¯ä»¶åŒ…](#å‡çº§è½¯ä»¶åŒ…)
        -   [å¸è½½å®‰è£…åŒ…](#å¸è½½å®‰è£…åŒ…)
        -   [æŸ¥è¯¢è½¯ä»¶åŒ…](#æŸ¥è¯¢è½¯ä»¶åŒ…)
-   [YUM](#YUM)
    -   [æºå’Œåº“](#æºå’Œåº“)
    -   [é…ç½®æ–‡ä»¶](#é…ç½®æ–‡ä»¶)
    -   [é…ç½®æº](#é…ç½®æº)
    -   [æ—¥å¸¸æ“ä½œ](#æ—¥å¸¸æ“ä½œ)
        -   [æŸ¥è¯¢è½¯ä»¶åŒ…](#æŸ¥è¯¢è½¯ä»¶åŒ…)
        -   [å®‰è£…è½¯ä»¶åŒ…](#å®‰è£…è½¯ä»¶åŒ…)
        -   [é‡è£…è½¯ä»¶åŒ…](#é‡è£…è½¯ä»¶åŒ…)
        -   [æ›´æ–°è½¯ä»¶åŒ…](#æ›´æ–°è½¯ä»¶åŒ…)
        -   [åˆ é™¤è½¯ä»¶åŒ…](#åˆ é™¤è½¯ä»¶åŒ…)
        -   [ç®¡ç†ç»„åŒ…](#ç®¡ç†ç»„åŒ…)
        -   [ç®¡ç†ä»“åº“](#ç®¡ç†ä»“åº“)
        -   [ç®¡ç†å†å²è®°å½•](#ç®¡ç†å†å²è®°å½•)
-   [æ­å»ºä»“åº“](#æ­å»ºä»“åº“)
    -   [yumç¼“å­˜åŒ…](#yumç¼“å­˜åŒ…)
    -   [æ­å»ºæœ¬åœ°yumä»“åº“](#æ­å»ºæœ¬åœ°yumä»“åº“)
-   [æ­å»ºä¼ä¸šyumä»“åº“](#æ­å»ºä¼ä¸šyumä»“åº“)
    -   [ç¯å¢ƒå‡†å¤‡](#ç¯å¢ƒå‡†å¤‡)
    -   [æœåŠ¡ç«¯æ“ä½œ](#æœåŠ¡ç«¯æ“ä½œ)
    -   [å®¢æˆ·ç«¯æ“ä½œ](#å®¢æˆ·ç«¯æ“ä½œ)
-   [æºç åŒ…ç®¡ç†å®è·µ](#æºç åŒ…ç®¡ç†å®è·µ)
    -   [æºç åŒ…çš„ä¼˜ç¼ºç‚¹](#æºç åŒ…çš„ä¼˜ç¼ºç‚¹)
-   [Ubuntuè½¯ä»¶åŒ…ç®¡ç†](#Ubuntuè½¯ä»¶åŒ…ç®¡ç†)
    -   [åŒºåˆ«](#åŒºåˆ«)
    -   [Ubuntuè½¯ä»¶åŒ…ç®¡ç†](#Ubuntuè½¯ä»¶åŒ…ç®¡ç†)
    -   [aptåŒ…ç®¡ç†](#aptåŒ…ç®¡ç†)

# RPM

rpmå…¨ç§°Redhat package managerç¼©å†™ï¼Œæ˜¯ç”±çº¢å¸½å­å¼€å‘ç”¨äºè½¯ä»¶åŒ…çš„å®‰è£…ã€å‡çº§ã€å¸è½½ä¸æŸ¥è¯¢çš„å·¥å…·

æ ¼å¼ï¼šxxx.rpmã€‚æ ¼å¼ï¼šrpm

## åŒ…åç»„æˆéƒ¨åˆ†

RPMåŒ…å‘½åä»¥-å°†è½¯ä»¶åˆ†æˆè‹¥å¹²éƒ¨åˆ†

![](image/image_oFM1heckF9.png)

## å…¶ä»–ç±»å‹çš„å®‰è£…åŒ…

| åˆ†ç±»        | å®‰è£…          | ç‰ˆæœ¬                 |
| --------- | ----------- | ------------------ |
| ç†Ÿé£Ÿç±»\|rpmåŒ… | é¢„å…ˆç¼–è¯‘æ‰“åŒ…ï¼Œå®‰è£…ç®€å• | è½¯ä»¶ï¼ˆk8så¼€æºåº”ç”¨ï¼‰ç‰ˆæœ¬åä½    |
| èœ\|æºç åŒ…    | æ‰‹åŠ¨ç¼–è¯‘æ‰“åŒ… å®‰è£…ç¹ç | è½¯ä»¶ç‰ˆæœ¬éšæ„ï¼ˆrpmåŒ…ç‰ˆæœ¬ä½ï¼Œæºç ï¼‰ |
| äºŒè¿›åˆ¶åŒ…      | è§£å‹å³å¯ä½¿ç”¨ï¼Œå®‰è£…ç®€å• | ä¸èƒ½ä¿®æ”¹æºç ï¼ˆå°å·¥å…·ï¼Œè§£å‹å³ç”¨ï¼‰   |

## åŒ…ç®¡ç†å‘½ä»¤

### å®‰è£…å‘½ä»¤

-i ï¼š å®‰è£…å®‰è£…åŒ…

-v : æ˜¾ç¤ºå®‰è£…è¿‡ç¨‹

-h ï¼š æ˜¾ç¤ºå®‰è£…è¿›åº¦æ¡

ä½¿ç”¨rpmå®‰è£…æœ¬åœ°è·¯å¾„ä¸‹çš„è½¯ä»¶åŒ…

```bash
mount /dev/cdrom /mnt #æŒ‚è½½å…‰ç›˜
rpm -ivh /mnt/Packagres/åŒ…å  #å®‰è£…åŒ…
```

æŸ¥æ‰¾å®‰è£…äº’è”ç½‘ä¸Šçš„åŒ…

```bash
wget ä¸‹è½½åˆ°æœ¬åœ° --ã€‹å®‰è£…
rpm -ivh  äº’è”ç½‘ä¸Šè½¯ä»¶åŒ…çš„ä½ç½®  #ä»äº’è”ç½‘ä¸Šä¸‹è½½è½¯ä»¶åŒ…
```

### ä¾èµ–åŒ…å®‰è£…

åŒ…ä¾èµ–æ˜¯æŒ‡Aä¾èµ–Bã€Bä¾èµ–Cã€Cä¾èµ–Aã€‚å½“æˆ‘ä»¬éœ€è¦å®‰è£…rpmç±»å‹åŒ…å‡ºç°ä¾èµ–å…³ç³»åº”è¯¥å¦‚ä½•å¤„ç†ï¼Œ

1.å°è¯•å®‰è£…è¢«ä¾èµ–çš„åŒ…1

2.å°è¯•å®‰è£…è¢«ä¾èµ–çš„åŒ…2

3.å°è¯•å®‰è£…è¢«ä¾èµ–çš„åŒ…3

æœ€åå°è¯•å®‰è£…è¢«ä¸»ç¨‹åºåŒ…

> ğŸ“Œç”±äºrpmçš„åŒ…ä¾èµ–çš„å…³ç³»å¤ªå¼ºï¼Œæ‰€ä»¥é€šå¸¸æˆ‘ä»¬éƒ½æ˜¯ä½¿ç”¨yumæ¥è§£å†³

### å‡çº§è½¯ä»¶åŒ…

1.å…ˆå®‰è£…ä½ç‰ˆæœ¬

2.å°è¯•ä½¿ç”¨rpm -ivhå®‰è£…é«˜ç‰ˆæœ¬ï¼ˆä¼šæŠ¥é”™ï¼‰

3.ä½¿ç”¨rpm -Uvhå‡çº§ä½ç‰ˆæœ¬åˆ°é«˜ç‰ˆæœ¬ï¼ˆå®Œç¾è§£å†³ï¼‰

### å¸è½½å®‰è£…åŒ…

å¦‚æœéœ€è¦å¸è½½ï¼Œå…ˆæŸ¥è¯¢è½¯ä»¶åŒ…æ˜¯å¦å®‰è£…ï¼Œç„¶åå†è¿›è¡Œå¸è½½æ“ä½œ

```bash
rpm -q è½¯ä»¶åŒ…   #ä½¿ç”¨rpm -qæŸ¥è¯¢è½¯ä»¶åŒ…æ˜¯å¦å­˜åœ¨ç³»ç»Ÿ
rpm -e è½¯ä»¶åŒ…   #åˆ é™¤è½¯ä»¶åŒ…
```

### æŸ¥è¯¢è½¯ä»¶åŒ…

| é€‰é¡¹  | æè¿°                  |
| --- | ------------------- |
| -q  | æŸ¥çœ‹æŒ‡å®šè½¯ä»¶åŒ…æ˜¯å¦å®‰è£…         |
| -qa | æŸ¥çœ‹ç³»ç»Ÿä¸­å·²å®‰è£…çš„æ‰€æœ‰RPMè½¯ä»¶åŒ…åˆ—è¡¨ |
| -qi | æŸ¥çœ‹æŒ‡å®šè½¯ä»¶çš„è¯¦ç»†ä¿¡æ¯         |
| -ql | æŸ¥è¯¢æŒ‡å®šè½¯ä»¶åŒ…æ‰€å®‰è£…çš„ç›®å½•ã€æ–‡ä»¶åˆ—è¡¨  |
| -qc | æŸ¥è¯¢æŒ‡å®šè½¯ä»¶åŒ…çš„é…ç½®æ–‡ä»¶        |
| -qf | æŸ¥è¯¢æ–‡ä»¶æˆ–ç›®å½•å±äºé‚£ä¸ªRPMè½¯ä»¶åŒ…   |

```bash
rpm -qa  |grep rpmåŒ…éƒ¨åˆ†å­—ç¬¦  #æ¨¡ç³ŠæŸ¥æ‰¾ç³»ç»Ÿå·²å®‰è£…çš„rpmåŒ…
rpm -qi  è½¯ä»¶åŒ… #æŸ¥è¯¢è½¯ä»¶åŒ…ç›¸å…³ä¿¡æ¯
rpm -ql è½¯ä»¶åŒ…  #æŸ¥è¯¢è½¯ä»¶åŒ…æ‰€å®‰è£…ä¸­åœ¨ç³»ç»Ÿä¸­ç”Ÿæˆçš„æ–‡ä»¶è·¯å¾„
rpm -qc è½¯ä»¶åŒ…  #æŸ¥è¯¢è½¯ä»¶åŒ…çš„ä¸»é…ç½®æ–‡ä»¶
rpm -qf æ–‡ä»¶åŒ…ä½ç½®  #æŸ¥è¯¢é…ç½®æ–‡ä»¶æˆ–ç³»ç»Ÿæ˜¯ç”±å“ªä¸ªrpmåŒ…æä¾›
rpm -qlp rpmåŒ…ä½ç½®  #æŸ¥è¯¢æœªå®‰è£…çš„rpmåŒ…ä¼šäº§ç”Ÿå“ªäº›æ–‡ä»¶
```

å°ç»“ï¼šæŸ¥è¯¢mkdirå‘½ä»¤æ˜¯ç”±å“ªä¸ªåŒ…å®‰è£…çš„

1.å…ˆæŸ¥å‡ºmkdirå‘½ä»¤çš„ä½ç½®  whcih  mkdir

2.æ ¹æ®å‘½ä»¤ä½ç½®è¿›è¡ŒåŒ…æŸ¥è¯¢   rpm -qf å‘½ä»¤ä½ç½® &#x20;

æˆ–è€…rpm  -qf  \$(which mkdir)  #å…ˆæ‰§è¡Œå°æ‹¬å·å†…çš„ï¼Œä¹‹åå°†ç»“æœå½“ä½œè¾“å…¥ç»™å‰è€…

psï¼šrpmæŸ¥è¯¢å‘½ä»¤æ¥è‡ªé‚£ä¸ªå®‰è£…åŒ…éœ€è¦çŸ¥é“å‘½ä»¤çš„ç»å¯¹è·¯å¾„ï¼Œå¦‚æœä¸å­˜åœ¨è¯¥å‘½ä»¤æ˜¯æ— æ³•æŸ¥æ‰¾åˆ°è¯¥å‘½ä»¤çš„æ‰€å±è½¯ä»¶åŒ…

3.å®‰è£….rpmè½¯ä»¶åŒ…æ—¶ï¼Œ-iå’Œ-uæœ‰ä½•åŒºåˆ«

-i å®‰è£…

-uå‡çº§

# YUM

yumèƒ½é€šè¿‡äº’è”ç½‘ä¸‹è½½.rpmæ ¼å¼åŒ…è¿›è¡ŒåŒ…è£…ï¼Œå¹¶èƒ½è‡ªåŠ¨å¤„ç†å…¶ä¾èµ–å…³ç³»ï¼Œæ— éœ€ç¹çåœ°ä¸€æ¬¡æ¬¡ä¸‹è½½å®‰è£…

yumæ–‡ä»¶åç¼€ä¸º .repo

## æºå’Œåº“

è¦ä½¿ç”¨yumå‘½ä»¤å·¥å…·å®‰è£…æ›´æ–°è½¯ä»¶ï¼Œéœ€è¦æœ‰ä¸€ä¸ªåŒ…å«å„ç§rpmè½¯ä»¶åŒ…çš„ä»“åº“ï¼Œè¿™ä¸ªä»“åº“æˆ‘ä»¬ä¸€èˆ¬ç§°ä¸ºyumçš„æºã€‚è¿™ä¸ªæºå¯ä»¥æ˜¯æœ¬åœ°ä»“åº“ã€ä¹Ÿå¯ä»¥æ˜¯ç½‘ç»œä»“åº“ã€‚

ä¾‹å¦‚ï¼šclient â€”ftp/http/fileâ€”yumåœ°å€â€”yumä»“åº“ï¼ˆrpmåŒ…é›†åˆï¼‰

## é…ç½®æ–‡ä»¶

centos8çš„é…ç½®æ–‡ä»¶

![](image/image_oPrKFMOVJ_.png)

centos7çš„é…ç½®æ–‡ä»¶

![](image/image_5yqekU8p_G.png)

## é…ç½®æº

ç³»ç»Ÿé»˜è®¤æ˜¯å›½å¤–æä¾›æºï¼Œéœ€è¦æ›¿æ¢ä¸ºå›½å†…çš„

```bash
wget -O /etc/yum.rpos.d/Centos-base.repo \http://mirrors.aliyun.com/repo/Centos-7.repo
```

é…ç½®ç¬¬ä¸‰æ–¹yumæºï¼ˆEPELï¼‰

```bash
wget -O /etc/yum.reopss.d/epel.repo \http://mirrors.aliyun.com/repo/Centos-7.repo
```

Nginxå®˜æ–¹æº

vim /etc/yum.repos.d/nginx.repo

yumæºçš„æŸ¥æ‰¾æ–¹å¼å¤§ä½“ä¸€è‡´Apacheï¼ŒDockerã€Nginxã€open starkã€elkstack

## æ—¥å¸¸æ“ä½œ

### æŸ¥è¯¢è½¯ä»¶åŒ…

ä½¿ç”¨dnf|yum listæŸ¥è¯¢æ‰€æœ‰ä»“åº“ä¸­çš„æ‰€æœ‰è½¯ä»¶åŒ…

```bash
yum list
yum list | grep ftp
```

ä½¿ç”¨dnf/yum list installedæŸ¥è¯¢æ‰€æœ‰å·²å®‰è£…è‡³ç³»ç»Ÿä¸­çš„è½¯ä»¶åŒ…

```bash
dnf list installed
yun list installed
```

æŸ¥è¯¢å‘½ä»¤æ¥è‡ªå“ªä¸ªè½¯ä»¶åŒ…

```bash
yum provides å‘½ä»¤
```

### å®‰è£…è½¯ä»¶åŒ…

ä½¿ç”¨dnf/yum installé€šè¿‡ä»“åº“è·å–è½¯ä»¶åŒ…è¿›è¡Œå®‰è£…

```bash
yum install è½¯ä»¶åŒ…  #äº¤äº’ï¼Œéº»çƒ¦
yum install è½¯ä»¶åŒ…  #éäº¤äº’
```

ä½¿ç”¨dnf/yum localinstallå®‰è£…æœ¬åœ°çš„rpmåŒ…ï¼Œå¦‚æœrpmåŒ…å­˜åœ¨ä¾èµ–ï¼Œä¼šé€šè¿‡å½“å‰å·²æœ‰çš„ä»“åº“è·å–è§£å†³ä¾èµ–å…³ç³»

```bash
yum install ç½‘ä¸Šæ–‡ä»¶åœ°å€
#yum Localinstallå®‰è£…æœ¬åœ°çš„rpmåŒ…ï¼Œä¼šè‡ªåŠ¨æŸ¥æ‰¾å½“å‰ç³»ç»Ÿä¸Šå·²æœ‰çš„ä»“åº“è§£å†³ä¾èµ–å…³ç³»
yum localinstall è½¯ä»¶åŒ…
```

### é‡è£…è½¯ä»¶åŒ…

å½“æˆ‘ä»¬å®‰è£…å¥½æœåŠ¡åï¼Œå¦‚æœä¸å°å¿ƒåˆ é™¤äº†æœåŠ¡çš„é…ç½®æ–‡ä»¶ï¼Œæ­¤æ—¶å¯ä»¥é€šè¿‡é‡è£…çš„æ–¹å¼ä¿®å¤ã€‚

é¦–å…ˆåˆ é™¤vsftpdé…ç½®ä¸»æ–‡ä»¶

```bash
rpm -qc vsftpd  #æŸ¥æ‰¾vsftpdæ–‡ä»¶ä½ç½®
rm -f é…ç½®æ–‡ä»¶ä½ç½® #åˆ é™¤æ–‡ä»¶
```

ä½¿ç”¨dnf/yum reinstallå¯¹è½¯ä»¶è¿›è¡Œé‡æ–°å®‰è£…

```bash
yum reinstall vsftpd
```

æ£€æŸ¥vsftpdæœåŠ¡é…ç½®æ–‡ä»¶æ˜¯å¦æ¢å¤ï¼Œä»¥åŠè½¯ä»¶æ˜¯å¦èƒ½æ­£å¸¸ä½¿ç”¨ã€‚

å†æ¬¡è¿è¡Œrpm  -qcæŸ¥è¯¢æ–‡ä»¶è½¯ä»¶åŒ…ä½ç½®

### æ›´æ–°è½¯ä»¶åŒ…

```bash
yum check-update  #å¯¹æ¯”linuxå·²å®‰è£…çš„è½¯ä»¶å’Œyumä»“åº“ä¸­çš„è½¯ä»¶ï¼Œæœ‰å“ªäº›éœ€è¦å‡çº§
yum update acl -y #æ›´æ–°aclè½¯ä»¶
yum update -y #æ›´æ–°æ•´ä¸ªç³»ç»Ÿæ‰€æœ‰çš„è½¯ä»¶ï¼ŒåŒ…æ‹¬å†…æ ¸ï¼ˆé€šå¸¸åˆšè£…å®Œç³»ç»Ÿä¼šæ‰§è¡Œï¼‰
```

### åˆ é™¤è½¯ä»¶åŒ…

```bash
yum remove è½¯ä»¶åŒ…
```

### ç®¡ç†ç»„åŒ…

ä½¿ç”¨å‘½ä»¤dnf/yum groups installå®‰è£…ä¸€æ•´ä¸ªç»„çš„è½¯ä»¶

```bash
yum group list
yum groups install Development \
Compatibility libraries \
base debugging Tools
```

ä½¿ç”¨å‘½ä»¤åˆ é™¤åŒ…ç»„

```bash
yum group remove è¦ç§»é™¤çš„è½¯ä»¶åŒ… -y
```

### ç®¡ç†ä»“åº“

åˆ—å‡ºdnf/yum repolistæºå¯ç”¨çš„è½¯ä»¶ä»“åº“

```bash
yum repolist all #æŸ¥çœ‹æ‰€æœ‰çš„ä»“åº“
```

é€šè¿‡dnf/yum-config-managerå¯ç”¨å’Œç¦ç”¨ä»“åº“ï¼ˆæœ¬è´¨éƒ½æ˜¯åœ¨ä¿®æ”¹repoæ–‡ä»¶ä¸­çš„enableå‚æ•°0  1ï¼‰

![](image/image_JnQmhmXfk9.png)

### ç®¡ç†å†å²è®°å½•

å½“æˆ‘ä»¬åˆ é™¤äº†æŸä¸ªè½¯ä»¶æ—¶ï¼Œå¸Œæœ›æ’¤é”€åˆ é™¤çš„æ“ä½œï¼Œå¯ä»¥ä½¿ç”¨yum history undo

åˆ é™¤httpdè½¯ä»¶ï¼Œç„¶åå‚çœ‹æ“ä½œè®°å½•

```bash
yum remove httpd -y
yum history
```

ä½¿ç”¨dnf/yum history undo Numberæ’¤é”€

```bash
yum history info N
yum history undo N
```

# æ­å»ºä»“åº“

## yumç¼“å­˜åŒ…

æ–¹å¼1.é€šè¿‡ä¿®æ”¹dnf/yumå…¨å±€é…ç½®æ–‡ä»¶

```bash
vim /etc/yum.conf
keeocache=1  #å¯åŠ¨ç¼“å­˜
yum install lrzsz -y
find /var/cache/yum/ -type f -name "*.rpm"
```

&#x20;æ–¹å¼2.é€šè¿‡dnf/yumä¸‹è½½è¯¥è½¯ä»¶åŒ…è‡³æœ¬åœ°ï¼Œä¸è¿›è¡Œå®‰è£…

```bash
yum install httpd -y \
--downloadonly \
--downloaddir=/opt
```

æ–¹å¼3.æ¸…ç†ç¼“å­˜ï¼Œå¯ä»¥ä½¿ç”¨dnf/yum clean

```bash
yum clean all #æ¸…ç†æ‰€æœ‰yumç¼“å­˜ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç¼“å­˜çš„è½¯ä»¶åŒ…
yum clean packages  #ä»…æ¸…ç†æ‰€æœ‰ç¼“å­˜çš„è½¯ä»¶åŒ…
```

## æ­å»ºæœ¬åœ°yumä»“åº“

Linuxç³»ç»Ÿåˆšå®‰è£…æ—¶æ˜¯ä¸èƒ½è”ç½‘çš„ã€‚ä½†éœ€è¦å®‰è£…ç›¸åº”ç¯å¢ƒçš„è½¯ä»¶åŒ…ã€‚è¿™ä¸ªæ—¶å€™å°±å¯ä»¥åˆ©ç”¨å…‰ç›˜åˆ¶ä½œä¸€ä¸ªæœ¬åœ°yumä»“åº“

æ–¹å¼1.å…‰ç›˜æŒ‚è½½ä¸Šï¼šrpm -ivh /path/xx.rpm
æ–¹å¼2.å°†å…‰ç›˜åˆ¶ä½œä¸ºä¸€ä¸ªæœ¬åœ°ä»“åº“ï¼Œæä¾›æœ¬åœ°ä½¿ç”¨ï¼›è‡ªå·±è§£å†³ä¾èµ–é—®é¢˜

```bash
mount /dev/cdrom /mnt  #æŒ‚è½½é•œåƒ
gzip /etc/yum.repos.d/* #å¤‡ä»½åŸæœ‰ä»“åº“

```

ç¼–è¾‘ä¸€ä¸ª.repoæ–‡ä»¶ï¼Œå°†ä»“åº“ä¿¡æ¯å­˜å‚¨è‡³è¯¥æ–‡ä»¶

![](image/image_N7LjjVomSp.png)

ç”Ÿæˆç¼“å­˜ä¿¡æ¯ç„¶åå®‰è£…è½¯ä»¶æµ‹è¯•

```bash
yum makecache
yum install lrzsz -y
```

# æ­å»ºä¼ä¸šyumä»“åº“

å¾ˆå¤šæ—¶å€™ä¸ä»…ä»…æ˜¯ä¸€å°æœºå™¨æ— æ³•ä¸Šç½‘ï¼Œè€Œæ˜¯å¾ˆå¤šæœºå™¨éƒ½æ— æ³•ä¸Šç½‘ï¼Œè¿™ä¸ªæ—¶å€™éš¾é“è¦æ¯ä¸€å°æœºå™¨éƒ½è¦æŒ‚è½½å…‰ç›˜å—ï¼Ÿå¯ä»¥æ˜¯å¯ä»¥ä½†æ˜¯æ–‡ä»¶æ›´æ–°æ€åŠï¼Œæ‰€ä»¥æˆ‘ä»¬å°±éœ€è¦æ„å»ºä¸€ä¸ªäººä¼ä¸šçº§çš„yumä»“åº“

![](image/image_NXwWnpk0Y2.png)

æœ¬åœ°å…‰ç›˜æä¾›åŸºç¡€è½¯ä»¶åŒ…ï¼šbase

yumç¼“å­˜æä¾›å¸¸ç”¨è½¯ä»¶åŒ…ï¼šnginxã€zabbixã€docker

### ç¯å¢ƒå‡†å¤‡

| ç³»ç»Ÿ     | IP         | è§’è‰²  |
| ------ | ---------- | --- |
| centos | 10.0.0.100 | æœåŠ¡å™¨ |
| centos | 10.0.0.99  | å®¢æˆ·ç«¯ |

### æœåŠ¡ç«¯æ“ä½œ

```bash
systemctl stop firewalld #å…³é—­é˜²ç«å¢™
setenforce  0
```

```bash
yum -y install vsftpd
system start vsftpd
system enable vsftpd #å®‰è£…ftpæœåŠ¡å¹¶åŠ å…¥å¼€æœºå¯åŠ¨
mkdir -p /var/ftp/centos
mount /dev/cdrom/mnt
cp -rp /mnt/packages/*.rpm/var/ftp/cetos7 #é¦–å…ˆæä¾›åŸºç¡€baseè½¯ä»¶åŒ…ï¼Œcentos7å’ŒcentosåŒ…çš„ä½ç½®ä¸åŒ
```

```bash
curl -s 'https://mirrors.aliyun.com/zabbix/zabbix/1.8/rhel/6/x86_64/' | grep "a href" | awk -F '"' '{print $2}' | grep "rpm" | sed -r 's#(.*)#wget -O /var/ftp/zabbix/\1 https://mirrors.aliyun.com/zabbix/zabbix/1.8/rhel/6/x86_64/\1#g' | bash  
#æä¾›ç¬¬ä¸‰æ–¹æºçš„rpmè½¯ä»¶åŒ…ï¼Œcurlï¼šè®¿é—®æµè§ˆå™¨çš„æ•°æ®å¹¶è¾“å‡ºï¼Œç­›é€‰å‡ºä¸‹è½½æ–‡ä»¶ï¼Œç”¨sedåŠ awkè¿›è¡Œä¸‹è½½
```

è„šæœ¬ä¸‹è½½

![](image/image_ofOOwzTfw1.png)

![](image/image_WatCI17qAC.png)

æä¾›ç¬¬ä¸‰æ–¹æºçš„rpmè½¯ä»¶åŒ…ï¼Œé‡‡ç”¨RsyncåŒæ­¥ç§‘å¤§æºæ–¹å¼å®ç°ï¼ŒåæœŸç»“åˆå®šæ—¶ä»»åŠ¡ï¼Œå®šç‚¹åŒæ­¥äº’è”ç½‘æœ€æ–°è½¯ä»¶åŒ…;

```bash
rsync -avz rsync://rsync.mirrors.ustc.edu.cn/repo/nginx /var/ftp/
```

```bash
yum -y install createrepo #å®‰è£…ä»“åº“åˆ›å»ºæ–‡ä»¶
createrepo  è¦åˆ›å»ºä»“åº“çš„æ–‡ä»¶  #åˆ›å»ºä»“åº“
#ps: å¦‚æœæ­¤ä»“åº“æ¯æ¬¡æ–°å¢è½¯ä»¶åˆ™éœ€è¦é‡æ–°ç”Ÿæˆä¸€æ¬¡


```

### å®¢æˆ·ç«¯æ“ä½œ

æ‰€æœ‰å®¢æˆ·ç«¯ä»…éœ€yumæºæŒ‡å‘æœ¬åœ°å®¢æˆ·ç«¯ï¼Œå³å¯ä½¿ç”¨æœ¬åœ°å½“æœåŠ¡å™¨æä¾›çš„è½¯ä»¶åŒ…

```bash
gzip /etc/yum.repos.d/*#
vim /etc/yum.repos.d/centos7
[centos7]
name=centos_base
baseurl=ftp://10.0.0.100/centos7 #centos7å’Œcentos8é…ç½®ä¸åŒ
gpdcheck=0
é…ç½®ä½¿ç”¨å…¶ä»–æº
vim /etc/yum.repos.d/ops.repo
[http_server_nginx]
name = anyway
baseurl = http://10.0.0.100/nginx/
enable = 1
gpgcheck = 0

[http_server_jenkins]
name = anyway
baseurl = http://10.0.0.100/jenkins/
enable = 1
gpgcheck = 0


[http_server_zabbix]
name = anyway
baseurl = http://10.0.0.100/zabbix/
enable = 1
gpgcheck = 0

```

# æºç åŒ…ç®¡ç†å®è·µ

\`æºç åŒ…æŒ‡çš„æ˜¯å¼€å‘ç¼–å†™å¥½çš„ç¨‹åºæºä»£ç ï¼Œä½†å¹¶æ²¡æœ‰å°†å…¶ç¼–è¯‘ä¸ºä¸€ä¸ªèƒ½æ­£å¸¸ä½¿ç”¨çš„äºŒè¿›åˆ¶å·¥å…·ã€‚

## æºç åŒ…çš„ä¼˜ç¼ºç‚¹

ä¼˜ç‚¹ï¼š1.å¯ä»¥è‡ªè¡Œä¿®æ”¹æºä»£ç ï¼Œä½†æ˜¯éœ€è¦ä¼šc

2.å¯ä»¥å®šåˆ¶éœ€è¦çš„ç›¸å…³åŠŸèƒ½

3.æ–°ç‰ˆè½¯ä»¶ä¼˜å…ˆæ›´æ–°æºç 

ç¼ºç‚¹ï¼š1ã€ç›¸å¯¹rpmå®‰è£…è½¯ä»¶çš„æ–¹å¼ä¼šå¤æ‚å¾ˆå¤šã€‚

2.æ ‡å‡†åŒ–å®æ–½å›°éš¾ï¼Œè‡ªåŠ¨åŒ–å°±æ— æ³•è½åœ°

æºç è·å–ï¼šå¸¸è§çš„è½¯ä»¶åŒ…éƒ½å¯å¯ä»¥åœ¨è§‚æœ›è·å–æºç åŒ…ï¼Œæ¯”å¦‚apacheã€nginxã€mysql

å¦‚ä½•å®‰è£…ï¼š

![](image/image_Ti6oOfItrs.png)

æ­¤æ–¹æ³•ä¸æ˜¯ç™¾åˆ†ç™¾é€šç”¨äºæ‰€æœ‰æºç åŒ…ï¼Œå»ºè®®æ‹¿åˆ°æºç åŒ…è§£å‹åï¼Œè¿›å…¥ç›®å½•å¯»æ‰¾ç›¸å…³çš„READMEå¸®åŠ©æ–‡æ¡£

# Ubuntuè½¯ä»¶åŒ…ç®¡ç†

### åŒºåˆ«

| æ“ä½œå†…å®¹      | centos                              | Ubuntu                                |
| --------- | ----------------------------------- | ------------------------------------- |
| è½¯ä»¶åŒ…åç¼€     | \*.rpm                              | \*.deb                                |
| æºé…ç½®æ–‡ä»¶     | /etc/yum.conf                       | /etc/apt/sources                      |
| ç½‘å¡é…ç½®æ–‡ä»¶    | /etc/sysconfig/network-scripts-eth0 | /etc/netplan/00-installer-config.yaml |
| åˆ›å»ºç”¨æˆ·      | é»˜è®¤åˆ›å»ºç”¨æˆ·å®¶ç›®å½•ã€è§£é‡Šå™¨bash                   | é»˜è®¤ä¸åˆ›å»ºç”¨æˆ·å®¶ç›®å½•ã€è§£é‡Šå™¨ä¸ºsh                     |
| é˜²ç«å¢™è§„åˆ™     | é»˜è®¤è§„åˆ™                                | é»˜è®¤æ²¡æœ‰ä»»ä½•è§„åˆ™                              |
| æƒé™        | rootæˆ–æ™®é€šç”¨æˆ·                           | é»˜è®¤æ™®é€šç”¨æˆ·æƒé™                              |
| ssh       | é»˜è®¤å…è®¸rootç™»å½•                          | é»˜è®¤ä¸å…è®¸rootç™»å½•                           |
| selinux   | /etc/selinux/config                 | æ²¡æœ‰selinux                             |
| æ›´æ–°è½¯ä»¶åŒ…åˆ—è¡¨   | yum makecahe                        | apt update                            |
| å®‰è£…è½¯ä»¶      | yum install package                 | apt insrall package                   |
| å®‰è£…å·²ä¸‹è½½çš„è½¯ä»¶åŒ… | rpm -ivh pkg.rpm                    | dpkg -i pkg.deb                       |
| å®‰è£…ä¸€ä¸‹è½½çš„è½¯ä»¶åŒ… | yum localinstall pkg.rpm            | apt install ./pkg.deb                 |
| åˆ é™¤è½¯ä»¶åŒ…     | yum remove pscksage                 | apt remove \|pur                      |

### Ubuntuè½¯ä»¶åŒ…ç®¡ç†

debianè½¯ä»¶åŒ…çš„åŒ…åå«debï¼Œç±»ä¼¼rpmåŒ…ã€‚å¯¹äºdebåŒ…çš„ç®¡ç†æ–¹å¼æœ‰dpkgã€aptä¸¤ç§æ–¹å¼

dpkgï¼šå¯ä»¥å®ç°å®‰è£…ã€åˆ é™¤ã€ä½†æ— æ³•è§£å†³ä¾èµ–é¡¹

aptï¼šç±»ä¼¼yumï¼ŒåŠŸèƒ½å¼ºå¤§

### aptåŒ…ç®¡ç†

| aptå‘½ä»¤            | apt-getå‘½ä»¤            | å‘½ä»¤åŠŸèƒ½            |
| ---------------- | -------------------- | --------------- |
| apt install      | apt-get intsall      | å®‰è£…è½¯ä»¶åŒ…           |
| apt remove       | apt-get remove       | ç§»é™¤è½¯ä»¶åŒ…           |
| apt purge        | apt-get purge        | ç§»é™¤è½¯ä»¶åŒ…åŠé…ç½®æ–‡ä»¶      |
| apt updata       | apt-get update       | åˆ·æ–°å­˜å‚¨åº“ç´¢å¼•         |
| apt upgrade      | apt-get upgrade      | å‡çº§æ‰€æœ‰å¯å‡çº§çš„è½¯ä»¶åŒ…     |
| apt autoremove   | apt-get autoremove   | è‡ªåŠ¨åˆ é™¤ä¸éœ€è¦çš„åŒ…       |
| apt full-upgrade | apt-get dist-upgrade | åœ¨å‡çº§è½¯ä»¶åŒ…æ—¶è‡ªåŠ¨å¤„ç†ä¾èµ–å…³ç³» |
| apt search       | apt-cache search     | æœç´¢åº”ç”¨ç¨‹åº          |
| apt show         | apt-cache show       | æ˜¾ç¤ºå®‰è£…ç»†èŠ‚          |
